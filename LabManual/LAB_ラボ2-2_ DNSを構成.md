---
lab:
    title: 'Windows Server のネットワークサービス'
---

# ラボ2-2  - DNSを構成

## 目標

このラボでは次の内容を学習します。

- タスク 1：演習環境へアクセス

- タスク 2：DNSサーバーをインストール

- タスク 3：レコードを登録する

- タスク 4：条件付きフォワーダを設定する

- タスク 5：名前解決を確認する

  

  ## 予想時間： 15 分

  

  ## 手順

  #### タスク 1：演習環境へアクセス

  このタスクでは、使用する演習環境へアクセスします。

  1. HostVM1にサインインします。
  
  1. デスクトップにあるHyper-Vマネージャーをクリックします。

  1. Hyper-Vマネージャー画面で「DNSDHCPWSUS」、「DC1-CTCT」をクリックし、アクセスします。

     

  #### タスク 2：DNSサーバーをインストール
  
  この手順はDNSDHCPWSUSで実施してください。
  
  1. 「役割と機能の追加ウィザード」が開きます。画面の指示に従って「次 >」をクリックします。
  
  2. 「インストールの種類の選択」画面で「役割ベースまたは機能ベースのインストール」を選択し、「次 >」をクリックします。
  
  3. 「サーバーの選択」画面で、「DHCPDNSWSUS」サーバーが選択されていることを確認し、「次 >」をクリックします。
  
  4. 「サーバーの役割の選択」画面で、「DNSサーバー」にチェックを入れ、「次 >」をクリックします。
  
  5. 「機能の選択」画面で必要な機能を追加するかの選択を求められる場合がありますが、デフォルトのまま「次 >」をクリックします。
  
  6. その後の説明ページを読み、さらに「次 >」をクリックします。
  
  7. 「確認」画面で、選択した内容を再確認し、「インストール」をクリックします。インストールが完了するまでしばらく待ちます。
  
  8. インストールが完了したら、「閉じる」をクリックします。
  
  9. サーバーマネージャーの「ツール」から「DNS」を選択して、「DNSマネージャ」を開きます。
  
  10. 「DNSマネージャ」で「DHCPDNSWSUS」を右クリックし、「新しいゾーン」を選択します。
  
  11. 「新しいゾーン ウィザード」が開き、ゾーンの種類として「プライマリゾーン」を選択し、「次 >」をクリックします。
  
  12. ゾーン名として「contoso.com」を入力し、「次 >」をクリックします。
  
  13. ゾーンファイルの設定で「新しいゾーン用のファイルを作成する」を選択し、「次 >」をクリックします。
  
  14. ダイナミック更新の設定で「ダイナミック更新を許可しない」を選択し、「次 >」をクリックします。
  
  15. 最後に「完了」をクリックしてウィザードを終了します。
  
      
  
  #### タスク 3：レコードを登録する
  
  この手順はDNSDHCPWSUSで実施してください。
  
  この手順はDNSDHCPWSUSで実施してください。
  
  1. 「サーバーマネージャー」から「ツール」メニューを開き、「DNS」を選択して「DNSマネージャ」を開きます。
  
  2. 「DNSマネージャ」の左ペインで「DHCPDNSWSUS」（または対象のDNSサーバー名）を展開します。
  
  3. 「フォワード ルックアップ ゾーン」を展開し、「contoso.com」ゾーンを選択します。
  
  4. 右側の領域で、空白部分を右クリックし、「新しいホスト (AまたはAAAA)...」を選択します。
  
  5. 「新しいホスト」ウィンドウが開きます。以下の情報を入力します。
  
     - **名前**: `www`
     - **IPアドレス**: `192.168.0.50`
  
  6. 「レコードを追加する」と表示されたら、「OK」をクリックします。
  
  7. 「新しいホスト」ウィンドウで、「完了」をクリックしてウィンドウを閉じます。
  
  8. 「DNSマネージャ」で「contoso.com」ゾーンを選択して、新しく追加されたAレコードが表示されることを確認します。
  
  9. エントリは「`www.contoso.com`」で、対応するIPアドレスは`192.168.0.50`となります。
  
     > 注意：今回登録した192.168.0.50は実在しないIPです。この演習では登録されたレコードの結果を確認します。
  
  
  
  #### タスク 4：条件付きフォワーダを設定する
  
  この手順はDC1-CTCTで実施してください。
  
  1. 「サーバーマネージャー」を開き、「ツール」メニューから「DNS」を選択して「DNSマネージャ」を開きます。
  2. 「DNSマネージャ」の左ペインで、`DC1-CTCT`サーバーを右クリックし、「プロパティ」を選択します。
  3. 「フォワーダ」タブを選択し、下部の「条件付きフォワーダ」領域で「新規...」ボタンをクリックします。
  4. ドメイン」に`contoso.com`を入力し、`contoso.com`のDNS情報を持つDNSサーバーのIPアドレス`192.168.0.30`を「選択したドメインに対するフォワーダのIPアドレス」ボックスに追加します。
  5. 設定が完了したら「OK」をクリックしてウィンドウを閉じ、再度「OK」をクリックして「プロパティ」ウィンドウを閉じます。
  
  
  
  #### タスク 5：名前解決を確認する
  
  この手順はDC1-CTCTで実施してください。
  
  1. 「スタート」メニューを開き、「cmd」または「コマンドプロンプト」と検索して、コマンドプロンプトを起動します。
  
  2. コマンドプロンプトで以下のコマンドを入力し名前解決をテストします。
  
     ```cmd
     nslookup www.contoso.com
     ```
  
  3. このコマンドにより、条件付きフォワーダを通して`www.contoso.com`のIPアドレス`192.168.0.50`が返ってきます。
  
  
  
  これでラボは完了です。お疲れ様でした。
