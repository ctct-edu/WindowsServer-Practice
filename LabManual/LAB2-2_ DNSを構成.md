---
lab:
    title: 'Windows Server のネットワークサービス'
---

# ラボ2-2  - DNSを構成（目安：15分）

## 演習で使用するマシン

以下のマシンを使用します。

| マシン名           | 用途/目的 |
| ------------------ | --------- |
| DomainController_1 | DNSの検証 |
| DNSServer          | DNSの構成 |



## 目標

このラボでは次の内容を学習します。

- タスク 1：DNSの役割をインストールする
- タスク 2：DNSの初期構成をする
- タスク 3：レコードを登録する
- タスク 4：条件付きフォワーダを設定する
- タスク 5：名前解決を確認する



## 手順

#### タスク 1：DNSの役割をインストールする

この手順はDNSServerで実施してください。

1. スタートメニューから「サーバーマネージャー」を選択して開きます。

2. 「役割と機能の追加ウィザード」が開きます。画面の指示に従って「次 >」をクリックします。

3. 「インストールの種類の選択」画面で「役割ベースまたは機能ベースのインストール」を選択し、「次 >」をクリックします。

4. 「サーバーの選択」画面で、「DNSServer」サーバーが選択されていることを確認し、「次 >」をクリックします。

5. 「サーバーの役割の選択」画面で、「DNSサーバー」にチェックを入れ、「次 >」をクリックします。

   > 「機能の追加」もクリックします。

6. 「機能の選択」画面でデフォルトのまま「次 >」をクリックします。

7. その後の説明ページを読み、さらに「次 >」をクリックします。

8. 「確認」画面で、選択した内容を再確認し、「インストール」をクリックします。インストールが完了するまでしばらく待ちます。

9. インストールが完了したら、「閉じる」をクリックします。



#### タスク 2：DNSの初期構成をする

この手順はDNSServerで実施してください。

1. サーバーマネージャーの「ツール」から「DNS」を選択して、「DNSマネージャ」を開きます。

2. 「DNSマネージャ」で「DNSServer」を右クリックし、「新しいゾーン」を選択します。

3. 「新しいゾーン ウィザード」が開き、ゾーンの種類として「プライマリゾーン」を選択し、「次 >」をクリックします。

4. 「前方または逆引き参照ゾーン」画面で、「前方参照ゾーン」を選択し、「次 >」をクリックします。

5. ゾーン名として「contoso.com」を入力し、「次 >」をクリックします。

6. ゾーンファイルの設定で「次の名前で新しくファイルを作成する」を選択し、「次 >」をクリックします。

7. 動的更新の設定で「動的更新を許可しない」を選択し、「次 >」をクリックします。

8. 最後に「完了」をクリックしてウィザードを終了します。

   

#### タスク 3：レコードを登録する

この手順はDNSServerで実施してください。

1. 「DNSマネージャ」の左ペインで「DNSServer」（または対象のDNSサーバー名）を展開します。

3. 「前方参照ゾーン」を展開し、「contoso.com」ゾーンを右クリックし、「新しいホスト (AまたはAAAA)...」を選択します。

4. 「新しいホスト」ウィンドウが開きます。以下の情報を入力します。

   - **名前**: `www`
   - **IPアドレス**: `192.168.100.50`

6. 「ホストの追加」クリックし、「正しく作成されました」ポップアップでOKをクリックします。

7. 「完了」をクリックしてウィンドウを閉じます。

7. 新しく追加されたAレコードが表示されることを確認します。

   > 注意：今回登録した192.168.100.50は実在しないIPです。この演習では登録されたレコードの結果を確認します。



#### タスク 4：条件付きフォワーダを設定する

この手順はDomainController_1で実施してください。

1. 「スタート」メニューから「サーバーマネージャー」を選択して開きます。
2. サーバーマネージャーの「ツール」メニューから「DNS」を選択します。

3. DNSマネージャーの左側のペインで、DomainController_1のDNSサーバーを展開します。

4. 「条件付きフォワーダー」フォルダを右クリックし、「新しい条件付きフォワーダー」を選択します。

5. 「DNSドメイン」のボックスに転送先のドメイン名（`contoso.com`）を入力します。

6. 「IPアドレスのリスト」に転送先のDNSサーバーのIPアドレス（`192.168.0.31`）を入力します。

7. 「このActiveDirectoryに条件付きフォワーダーを保存し、次の方法でレプリケートする」にチェックを入れます。

8. 「このドメインのすべてのDNSサーバー」に変更します。

9. 「OK」をクリックして設定を保存します。



#### タスク 5：名前解決を確認する

この手順はDomainController_1で実施してください。

1. 「スタート」メニューを開き、「cmd」または「コマンドプロンプト」と検索して、コマンドプロンプトを起動します。

2. コマンドプロンプトで以下のコマンドを入力し名前解決をテストします。

   ```cmd
   nslookup www.contoso.com
   ```

3. このコマンドにより、条件付きフォワーダを通して`www.contoso.com`のIPアドレス`192.168.100.50`が返ってきます。



これでラボは完了です。お疲れ様でした。
